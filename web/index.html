<!DOCTYPE html>
<html>
<head>
	<title>This is me attempting to make a router</title>
	<link href='https://fonts.googleapis.com/css?family=Roboto:400,300,500' rel='stylesheet' type='text/css'>
	<script type="text/javascript" src="router.js"></script>
	<script type="text/javascript">

	//Window finished loading event
	window.addEventListener('load', function(){
		//run the location checker function ever 250ms
		setInterval(locationCheck, 250);
		window.vhostInterval = setInterval(checkVhost, 250);
		document.getElementById('new-vhost').addEventListener('click', function(){
			document.getElementById('vhost-window').style.display = "block";
		});
		document.getElementById('save-web-vhost').addEventListener('click', function(){
			
			var data = {};
			data['id'] = document.getElementById('vhost-id').value;
			data['name'] = document.getElementsByName('vhost-web-name')[0].value;
			data['addr'] = document.getElementsByName('vhost-web-addr')[0].value;
			data['aliases'] = getAliases('vhost-web-alias');
			data['cms'] = checkedRadio('vhost-web-cms').value;

			vhost[data.name] = data;
			vhost.dirty = true;
		})
	});

	/*-----------------------------------------------*/
	/*----------      Routing Fucntions     ---------*/
	/*-----------------------------------------------*/

	var routes = {
		thisFunct: window.thisFunct
	};
	function thisFunct(){
		console.log('this function executed');
	}
	//this is the function to execute as the default route if something unknown is entered
	function defaultRoute(){

	}
	//end routing

	/*-----------------------------------------------*/
	/*----------       App Fucntions        ---------*/
	/*-----------------------------------------------*/

	var vhost = {dirty: false};
	function checkVhost(){
		if (vhost.dirty == true)
			console.log('yep');
		vhost.dirty == false;
	}

	/*-----------------------------------------------*/
	/*----------     Utility Fucntions      ---------*/
	/*-----------------------------------------------*/

	function checkedRadio(name){
		var elements = document.getElementsByName(name);
		for (var i=0; i<elements.length; i++){
			if(elements[i].checked)
				return elements[i];
		}
	}
	function getAliases(name){
		var elements = document.getElementsByName(name);
		var values = [];
		for (var i = 0; i < elements.length; i++) {
			values.push(elements[i].value);
		}
		return values;
	}
	function clone(obj){
		var copy = {}
		for(var attr in obj){

		}
	}

	</script>
	<style type="text/css">
		* {
			font-family: 'Roboto', sans-serif;
			font-weight: 300;
			padding: 0;
			margin: 0;
	   		box-sizing: border-box;
		}
		.blue {
			color: #fff;
		    background-color: cornflowerblue;
		}
		ul li{
			list-style-type: none;
		}
		div#vhost-sidebar {
			position: fixed;
		    top: 0;
		    bottom: 0;
		    padding: 20px;
		    width: 199px;
		    border-right: 1px solid cornflowerblue;
		    background-color: #eee;
		}
		button {
		    border: 0;
		    padding: 4px 8px;
		    border-radius: 3px;
		}
		ul#vhost-type li.active {
		    color: cornflowerblue;
		    border-bottom: 3px solid cornflowerblue;
		}
		div#vhost-window {
		    margin-left: 200px;
		    padding: 20px;
		    display: none;
		}
		ul#vhost-type li {
		    display: inline-block;
		    margin-right: 10px;
		    cursor: pointer;
		}
		a#vhost-web-add-alias, a#vhost-redirect-add-alias {
			vertical-align: middle;
		    cursor: pointer;
		}
		div#vhost-web > div {
		    margin: 10px 0;
		}
			div#vhost-web > div > input[type=text] {
		    margin-right: 10px;
		}
		div.vhost-type{
			display: none;
		}
		div.vhost-type:first-of-type{
			display: block;
		}
		div#vhost-list li {
			cursor: pointer;
		}
	</style>
</head>
<body>

<div>
	<div id="vhost-sidebar">
		<button class="blue" id="new-vhost">New</button>
		<ul id="vhost-list">
		</ul>
	</div>

	<div id="vhost-window">
		<ul id="vhost-type">
			<li class="active">Website</li>
			<li>Redirect</li>
		</ul>
		<input type="hidden" id="vhost-id" value="">
		<div class="vhost-type" id="vhost-web">
			<div><input type="text" placeholder="Name" name="vhost-web-name" class="vhost-web-config"></div>
			<div><input type="text" placeholder="Web Address" name="vhost-web-addr" class="vhost-web-config"></div>
			<div><input type="text" placeholder="Alternate Name" name="vhost-web-alias" class="vhost-web-config"><a id="vhost-web-add-alias">+</a></div>
			<div><input type="radio" name="vhost-web-cms" vlaue="1" class="vhost-web-config"> Drupal <input type="radio" name="vhost-web-cms" value="2" class="vhost-web-config"> Wordpress</div>
			<button class="blue" id="save-web-vhost">Save</button>
		</div>
		<div class="vhost-type" id="vhost-redirect">
			<div><input type="text" placeholder="Name" name="vhost-redirect-name" class="vhost-redirect-config"></div>
			<div><input type="text" placeholder="Web Address" name="vhost-redirect-addr" class="vhost-redirect-config"></div>
			<div><input type="text" placeholder="Alternate Name" name="vhost-redirect-alias" class="vhost-redirect-config"><a id="vhost-redirect-add-alias">+</a></div>
			<div><input type="text" placeholder="Redirect Address" name="vhost-redirect-redirect" class="vhost-redirect-config"></div>
			<div><input type="radio" name="vhost-redirect-type" vlaue="1" class="vhost-redirect-config"> Permanent <input type="radio" name="vhost-redirect-type" value="2" class="vhost-redirect-config"> Temporary</div>
			<button class="blue" id="save-redirect-vhost">Save</button>
		</div>
	</div>
</div>

</body>
</html>